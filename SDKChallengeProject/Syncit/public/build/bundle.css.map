{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../../App.svelte",
    "../../Embed.svelte",
    "../../LineChart.svelte",
    "../../Panel.svelte",
    "../../Tag.svelte"
  ],
  "sourcesContent": [
    "<script>\n  import { onMount, onDestroy } from \"svelte\";\n  import { Replayer, EventType, pack, mirror } from \"rrweb\";\n  import { createMachine, interpret } from \"@xstate/fsm\";\n  import { quintOut } from \"svelte/easing\";\n  import { scale } from \"svelte/transition\";\n  import { RtcTransporter } from \"./transport\";\n  import { BUFFER_MS, MirrorBuffer } from \"./buffer\";\n  import {\n    APP_UID,\n    CUSTOM_EVENT_TAGS,\n    REMOTE_CONTROL_ACTIONS,\n  } from \"./constant\";\n  import { formatBytes, onMirror, isIgnoredOnRmoteControl } from \"./common.js\";\n  import Panel from \"./components/Panel.svelte\";\n  import LineChart from \"./components/LineChart.svelte\";\n  import Icon from \"./components/Icon.svelte\";\n\n  window.mirror = mirror;\n\n  const transporter = new RtcTransporter(APP_UID);\n  let login = transporter.login();\n\n  let playerDom;\n  let replayer;\n  const buffer = new MirrorBuffer({\n    onRecord({ chunk }) {\n      if (\n        !controlCurrent.matches(\"controlling\") ||\n        !isIgnoredOnRmoteControl(chunk)\n      ) {\n        replayer.addEvent(chunk);\n      }\n    },\n  });\n\n  let open = false;\n\n  const appMachine = createMachine(\n    {\n      initial: \"idle\",\n      states: {\n        idle: {\n          on: {\n            SOURCE_READY: {\n              target: \"sourceReady\",\n            },\n          },\n        },\n        sourceReady: {\n          on: {\n            CONNECT: {\n              target: \"waiting_first_record\",\n            },\n          },\n        },\n        waiting_first_record: {\n          on: {\n            FIRST_RECORD: {\n              target: \"connected\",\n            },\n          },\n        },\n        connected: {\n          on: {\n            STOP: {\n              target: \"stopped\",\n              actions: [\"stop\"],\n            },\n          },\n        },\n        stopped: {\n          on: {\n            RESET: \"idle\",\n          },\n        },\n      },\n    },\n    {\n      actions: {\n        stop() {\n          replayer.pause();\n          playerDom.innerHTML = \"\";\n          buffer.reset();\n        },\n      },\n    }\n  );\n\n  let stopControl;\n  const controlMachine = createMachine(\n    {\n      initial: \"not_control\",\n      states: {\n        not_control: {\n          on: {\n            REQUEST: {\n              target: \"requested\",\n              actions: [\"request\"],\n            },\n          },\n        },\n        requested: {\n          on: {\n            ACCEPTED: {\n              target: \"controlling\",\n              actions: [\"accepted\"],\n            },\n          },\n        },\n        controlling: {\n          on: {\n            STOP_CONTROL: {\n              target: \"not_control\",\n              actions: [\"stopControl\"],\n            },\n          },\n        },\n      },\n    },\n    {\n      actions: {\n        request() {\n          transporter.sendRemoteControl({\n            action: REMOTE_CONTROL_ACTIONS.REQUEST,\n          });\n        },\n        accepted() {\n          replayer.enableInteract();\n          stopControl = onMirror(replayer.iframe, (payload) => {\n            transporter.sendRemoteControl(payload);\n          });\n        },\n        stopControl() {\n          transporter.sendRemoteControl({\n            action: REMOTE_CONTROL_ACTIONS.STOP,\n          });\n          replayer.disableInteract();\n          if (stopControl) {\n            stopControl();\n          }\n        },\n      },\n    }\n  );\n\n  function connect() {\n    service.send(\"CONNECT\");\n    transporter.sendMirrorReady();\n    replayer = new Replayer([], {\n      root: playerDom,\n      loadTimeout: 100,\n      liveMode: true,\n      insertStyleRules: [\".syncit-embed { display: none !important }\"],\n      showWarning: true,\n      showDebug: true,\n    });\n  }\n\n  let latencies = [];\n  let sizes = [];\n  function normalizePoints(points) {\n    if (points.length > 20) {\n      points = points.slice(points.length - 20, points.length);\n    } else {\n      points = new Array(20 - points.length)\n        .fill()\n        .map((_, idx) => ({\n          x: points[0] ? points[0].x - 1000 * (21 - points.length - idx) : 0,\n          y: 0,\n        }))\n        .concat(points);\n    }\n    return points;\n  }\n  $: _latencies = normalizePoints(latencies);\n  $: _sizes = normalizePoints(sizes);\n  $: {\n    if (latencies.length > 20) {\n      latencies = latencies.slice(latencies.length - 20, latencies.length);\n    }\n    if (sizes.length > 20) {\n      sizes = sizes.slice(sizes.length - 20, sizes.length);\n    }\n  }\n  $: lastSize = formatBytes(_sizes[_sizes.length - 1].y);\n  function getSizeOfString(str) {\n    return encodeURI(str).split(/%(?:u[0-9A-F]{2})?[0-9A-F]{2}|./).length - 1;\n  }\n  function collectSize(timestamp, str) {\n    if (sizes.length === 0) {\n      sizes.push({ x: Date.now(), y: 0 });\n    }\n    const lastSize = sizes[sizes.length - 1];\n    const size = getSizeOfString(str);\n    if (timestamp - lastSize.x < 1000) {\n      lastSize.y += size;\n    } else {\n      sizes.push({ x: Date.now(), y: size });\n    }\n    sizes = sizes;\n  }\n\n  let mouseSize = \"syncit-mouse-s2\";\n\n  let current = appMachine.initialState;\n  const service = interpret(appMachine);\n\n  let controlCurrent = controlMachine.initialState;\n  const controlService = interpret(controlMachine);\n\n  onMount(() => {\n    service.start();\n    service.subscribe((state) => {\n      current = state;\n    });\n    controlService.start();\n    controlService.subscribe((state) => {\n      controlCurrent = state;\n    });\n\n    transporter.on(\"sourceReady\", () => {\n      service.send(\"SOURCE_READY\");\n    });\n    transporter.on(\"record\", (data) => {\n      const { id, chunk, t } = data.payload;\n      if (!current.matches(\"connected\")) {\n        replayer.startLive(chunk.timestamp - BUFFER_MS);\n        service.send(\"FIRST_RECORD\");\n      }\n      if (chunk.type === EventType.Custom) {\n        switch (chunk.data.tag) {\n          case CUSTOM_EVENT_TAGS.PING:\n            latencies = latencies.concat({ x: t, y: Date.now() - t });\n            break;\n          case CUSTOM_EVENT_TAGS.MOUSE_SIZE:\n            mouseSize = `syncit-mouse-s${chunk.data.payload.level}`;\n            break;\n          case CUSTOM_EVENT_TAGS.ACCEPT_REMOTE_CONTROL:\n            controlService.send(\"ACCEPTED\");\n            break;\n          case CUSTOM_EVENT_TAGS.STOP_REMOTE_CONTROL:\n            controlService.send(\"STOP_CONTROL\");\n            break;\n          default:\n            break;\n        }\n      }\n      Promise.resolve().then(() => collectSize(t, pack(chunk)));\n      buffer.add({ id, chunk });\n      transporter.ackRecord(id);\n    });\n    transporter.on(\"stop\", () => {\n      service.send(\"STOP\");\n    });\n  });\n  onDestroy(() => {\n    service.stop();\n    controlService.stop();\n  });\n</script>\n\n<div class=\"syncit-app {mouseSize}\">\n  {#await login}\n  <div class=\"syncit-load-text syncit-center\">初始化中...</div>\n  {:then}\n  <!---->\n  <div bind:this=\"{playerDom}\"></div>\n  {#if current.matches('idle')}\n  <div class=\"syncit-center\">\n    <div class=\"syncit-load-text syncit-hint\">\n      <h3>等待连接中</h3>\n      <div>源端点击“启用 syncit 分享”按钮，即可建立连接。</div>\n    </div>\n  </div>\n  {:else if current.matches('sourceReady') ||\n  current.matches('waiting_first_record')}\n  <div class=\"syncit-center\">\n    <button\n      class=\"syncit-btn\"\n      on:click=\"{connect}\"\n      disabled=\"{!current.matches('sourceReady')}\"\n    >\n      建立连接\n    </button>\n  </div>\n  {:else if current.matches('connected')}\n  <div class=\"syncit-app-control\">\n    {#if open}\n    <div\n      transition:scale=\"{{duration: 500, opacity: 0.5, easing: quintOut}}\"\n      style=\"transform-origin: right bottom;\"\n    >\n      <Panel>\n        <div class=\"syncit-metric\">\n          <div class=\"syncit-chart-title\">\n            延时\n            <span style=\"color: #41efc5;\">\n              {_latencies.length ? _latencies[_latencies.length - 1].y : '-'} ms\n            </span>\n          </div>\n          <div class=\"syncit-metric-line\">\n            <LineChart points=\"{_latencies}\"></LineChart>\n          </div>\n        </div>\n        <div class=\"syncit-metric\">\n          <div class=\"syncit-chart-title\">\n            流量\n            <span style=\"color: #8c83ed;\">\n              {lastSize.value} {lastSize.unit}\n            </span>\n          </div>\n          <div class=\"syncit-metric-line\">\n            <LineChart points=\"{_sizes}\" color=\"#8C83ED\"></LineChart>\n          </div>\n        </div>\n        <div>\n          <p>远程控制</p>\n          {#if controlCurrent.matches('not_control')}\n          <button\n            class=\"syncit-btn ordinary\"\n            on:click=\"{() => controlService.send('REQUEST')}\"\n          >\n            申请控制\n          </button>\n          {:else if controlCurrent.matches('requested')}\n          <button class=\"syncit-btn ordinary\" disabled>\n            已申请\n          </button>\n          {:else if controlCurrent.matches('controlling')}\n          <button\n            class=\"syncit-btn ordinary\"\n            on:click=\"{() => controlService.send('STOP_CONTROL')}\"\n          >\n            停止控制\n          </button>\n          {/if}\n        </div>\n      </Panel>\n    </div>\n    {/if}\n    <!---->\n    <button class=\"syncit-toggle syncit-btn\" on:click=\"{() => open = !open}\">\n      <Icon name={open ? 'close' : 'team'}></Icon>\n    </button>\n  </div>\n  {:else if current.matches('stopped')}\n  <div class=\"syncit-center\">\n    <div class=\"syncit-load-text syncit-hint\">\n      <div>连接已被断开</div>\n      <button\n        class=\"syncit-btn\"\n        on:click=\"{() => service.send('RESET')}\"\n        style=\"display: block; margin: 0.5em auto;\"\n      >\n        重新准备\n      </button>\n    </div>\n  </div>\n  {/if}\n  <!---->\n  {:catch error}\n  <div class=\"syncit-error syncit-center\">{error.message}</div>\n  {/await}\n</div>\n\n<style>\n  :global(body) {\n    margin: 0;\n    padding: 0;\n  }\n  :global(iframe) {\n    border: none;\n  }\n  :global(p) {\n    margin-top: 0;\n    margin-bottom: 8px;\n  }\n  :global(.replayer-wrapper) {\n    position: relative;\n  }\n  :global(.replayer-mouse) {\n    position: absolute;\n    width: 20px;\n    height: 20px;\n    transition: 0.05s linear;\n    background-size: contain;\n    background-position: center center;\n    background-repeat: no-repeat;\n    background-image: url(\"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9JzMwMHB4JyB3aWR0aD0nMzAwcHgnICBmaWxsPSIjMDAwMDAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGRhdGEtbmFtZT0iTGF5ZXIgMSIgdmlld0JveD0iMCAwIDUwIDUwIiB4PSIwcHgiIHk9IjBweCI+PHRpdGxlPkRlc2lnbl90bnA8L3RpdGxlPjxwYXRoIGQ9Ik00OC43MSw0Mi45MUwzNC4wOCwyOC4yOSw0NC4zMywxOEExLDEsMCwwLDAsNDQsMTYuMzlMMi4zNSwxLjA2QTEsMSwwLDAsMCwxLjA2LDIuMzVMMTYuMzksNDRhMSwxLDAsMCwwLDEuNjUuMzZMMjguMjksMzQuMDgsNDIuOTEsNDguNzFhMSwxLDAsMCwwLDEuNDEsMGw0LjM4LTQuMzhBMSwxLDAsMCwwLDQ4LjcxLDQyLjkxWm0tNS4wOSwzLjY3TDI5LDMyYTEsMSwwLDAsMC0xLjQxLDBsLTkuODUsOS44NUwzLjY5LDMuNjlsMzguMTIsMTRMMzIsMjcuNThBMSwxLDAsMCwwLDMyLDI5TDQ2LjU5LDQzLjYyWiI+PC9wYXRoPjwvc3ZnPg==\");\n  }\n  .syncit-mouse-s1 :global(.replayer-mouse) {\n    width: 10px;\n    height: 10px;\n  }\n  .syncit-mouse-s2 :global(.replayer-mouse) {\n    width: 20px;\n    height: 20px;\n  }\n  .syncit-mouse-s3 :global(.replayer-mouse) {\n    width: 30px;\n    height: 30px;\n  }\n  :global(.replayer-mouse::after) {\n    content: \"\";\n    display: inline-block;\n    width: 20px;\n    height: 20px;\n    border-radius: 10px;\n    background: #e75a3a;\n    transform: translate(-10px, -10px);\n    opacity: 0.3;\n  }\n  :global(.replayer-mouse.active::after) {\n    animation: click 0.2s ease-in-out 1;\n  }\n\n  @keyframes click {\n    0% {\n      opacity: 0.3;\n      width: 20px;\n      height: 20px;\n      border-radius: 10px;\n      transform: translate(-10px, -10px);\n    }\n    50% {\n      opacity: 0.5;\n      width: 10px;\n      height: 10px;\n      border-radius: 5px;\n      transform: translate(-5px, -5px);\n    }\n  }\n\n  .syncit-app {\n    width: 100%;\n    height: 100%;\n  }\n\n  button {\n    outline: none;\n  }\n  .syncit-btn:hover {\n    background: #3399ff;\n  }\n\n  .syncit-btn,\n  .syncit-btn:active {\n    cursor: pointer;\n    background: #0078f0;\n    border: 1px solid rgba(62, 70, 82, 0.18);\n    box-shadow: 0px 1px 2px rgba(184, 192, 204, 0.6);\n    color: #fff;\n    padding: 8px 16px;\n    border-radius: 4px;\n    font-size: 14px;\n    line-height: 22px;\n    margin-bottom: 0.5em;\n  }\n\n  .syncit-btn.ordinary {\n    background: #fff;\n    color: #3e4652;\n    border: 1px solid rgba(129, 138, 153, 0.6);\n  }\n  .syncit-btn.ordinary:hover {\n    background: #f5f7fa;\n  }\n  .syncit-btn.ordinary:active {\n    background: #dfe4eb;\n  }\n\n  .syncit-center {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n  }\n\n  .syncit-load-text {\n    font-size: 14px;\n    line-height: 22px;\n    color: #3e4652;\n  }\n\n  .syncit-load-text h3 {\n    margin: 8px 0;\n  }\n\n  .syncit-error {\n    color: #e75a3a;\n  }\n\n  .syncit-hint {\n    background: rgba(245, 247, 250);\n    border-radius: 4px;\n    padding: 8px;\n    min-width: 150px;\n  }\n\n  .syncit-toggle,\n  .syncit-toggle:active {\n    width: 40px;\n    height: 40px;\n    line-height: 40px;\n    border-radius: 20px;\n    padding: 0;\n    align-self: flex-end;\n  }\n\n  .syncit-app-control {\n    position: absolute;\n    right: 1em;\n    bottom: 1em;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .syncit-metric {\n    display: flex;\n    align-items: center;\n    margin-bottom: 8px;\n  }\n\n  .syncit-chart-title {\n    font-size: 13px;\n    line-height: 20px;\n    color: #3e4652;\n    width: 100px;\n    margin-right: 8px;\n  }\n\n  .syncit-metric-line {\n    flex: 1;\n  }\n</style>\n",
    "<script>\n  import { record, mirror } from \"rrweb\";\n  import { createMachine, interpret } from \"@xstate/fsm\";\n  import { onMount, onDestroy } from \"svelte\";\n  import { quintOut } from \"svelte/easing\";\n  import { scale } from \"svelte/transition\";\n  import { RtcTransporter } from \"./transport\";\n  import { SourceBuffer } from \"./buffer\";\n  import {\n    EMBED_UID,\n    CUSTOM_EVENT_TAGS,\n    REMOTE_CONTROL_ACTIONS,\n  } from \"./constant\";\n  import { applyMirrorAction } from \"./common\";\n  import Panel from \"./components/Panel.svelte\";\n  import Tag from \"./components/Tag.svelte\";\n  import Icon from './components/Icon.svelte'\n\n  const transporter = new RtcTransporter(EMBED_UID);\n  let login = transporter.login();\n\n  let ref;\n  $: ref && document.body.appendChild(ref);\n\n  let open = false;\n\n  let stopRecordFn;\n  const buffer = new SourceBuffer({\n    onTimeout(record) {\n      transporter.sendRecord(record);\n    },\n  });\n\n  const embedMachine = createMachine(\n    {\n      initial: \"idle\",\n      states: {\n        idle: {\n          on: {\n            START: {\n              target: \"ready\",\n              actions: [\"start\"],\n            },\n          },\n        },\n        ready: {\n          on: {\n            CONNECT: {\n              target: \"connected\",\n              actions: [\"connect\"],\n            },\n          },\n        },\n        connected: {\n          on: {\n            STOP: {\n              target: \"idle\",\n              actions: [\"stop\"],\n            },\n          },\n        },\n      },\n    },\n    {\n      actions: {\n        start() {\n          transporter.sendSourceReady();\n        },\n        connect() {\n          const stopRecord = record({\n            emit(event) {\n              const id = buffer.add(event);\n              transporter.sendRecord(buffer.buffer[id]);\n            },\n            inlineStylesheet: false\n          });\n          const timer = setInterval(() => {\n            record.addCustomEvent(CUSTOM_EVENT_TAGS.PING);\n          }, 1000);\n          stopRecordFn = () => {\n            stopRecord();\n            clearInterval(timer);\n          };\n        },\n        stop() {\n          stopRecordFn();\n          transporter.sendStop();\n          buffer.reset();\n        },\n      },\n    }\n  );\n\n  const controlMachine = createMachine(\n    {\n      initial: \"not_control\",\n      states: {\n        not_control: {\n          on: {\n            REQUEST: {\n              target: \"requesting\",\n            },\n          },\n        },\n        requesting: {\n          on: {\n            ACCEPT: {\n              target: \"controlled\",\n              actions: [\"accept\"],\n            },\n          },\n        },\n        controlled: {\n          on: {\n            STOP: {\n              target: \"not_control\",\n            },\n          },\n        },\n      },\n    },\n    {\n      actions: {\n        accept() {\n          record.addCustomEvent(CUSTOM_EVENT_TAGS.ACCEPT_REMOTE_CONTROL);\n        },\n      },\n    }\n  );\n\n  let selecting = false;\n  let mask;\n  $: mask && document.body.appendChild(mask);\n  let blockElSet = new Set();\n  $: blockEls = Array.from(blockElSet);\n\n  const highlight = (target) => {\n    const { x, y, width, height } = target.getBoundingClientRect();\n    Object.assign(mask.style, {\n      left: `${x}px`,\n      top: `${y}px`,\n      width: `${width}px`,\n      height: `${height}px`,\n      display: 'inherit'\n    });\n  };\n  const removeHighlight = () => {\n    Object.assign(mask.style, {\n      left: 0,\n      top: 0,\n      width: 0,\n      height: 0,\n      display: 'none'\n    });\n  };\n\n  const over = (event) => {\n    if (\n      event.target &&\n      ref !== event.target &&\n      !ref.contains(event.target) &&\n      event.target !== document.body\n    ) {\n      highlight(event.target);\n    }\n  };\n  const click = (event) => {\n    if (!selecting || ref.contains(event.target)) {\n      return;\n    }\n    event.target.classList.add(\"rr-block\");\n    blockElSet = blockElSet.add(event.target);\n    cancelSelect();\n  };\n  const cancelSelect = () => {\n    selecting = false;\n    removeHighlight();\n    window.removeEventListener(\"mousemove\", over, { capture: true });\n    window.removeEventListener(\"click\", click, { capture: true });\n  };\n  const removeBlockEl = (el) => {\n    blockElSet.delete(el);\n    blockElSet = blockElSet;\n    removeHighlight();\n    el.classList.remove(\"rr-block\");\n  };\n  function handleSelectBlock() {\n    if (selecting) {\n      cancelSelect();\n    } else {\n      selecting = true;\n      window.addEventListener(\"mousemove\", over, { capture: true });\n      window.addEventListener(\"click\", click, { capture: true });\n    }\n  }\n\n  function changeMouseSize(level) {\n    record.addCustomEvent(CUSTOM_EVENT_TAGS.MOUSE_SIZE, { level });\n  }\n\n  function stopRemoteControl() {\n    record.addCustomEvent(CUSTOM_EVENT_TAGS.STOP_REMOTE_CONTROL);\n    controlService.send(\"STOP\");\n  }\n\n  let current = embedMachine.initialState;\n  const service = interpret(embedMachine);\n\n  let controlCurrent = controlMachine.initialState;\n  const controlService = interpret(controlMachine);\n\n  onMount(() => {\n    service.start();\n    service.subscribe((state) => {\n      current = state;\n    });\n    controlService.start();\n    controlService.subscribe((state) => {\n      controlCurrent = state;\n    });\n\n    transporter.on(\"mirrorReady\", () => {\n      service.send(\"CONNECT\");\n    });\n    transporter.on(\"ack\", ({ payload }) => {\n      buffer.delete(payload);\n    });\n    transporter.on(\"remoteControl\", ({ payload }) => {\n      switch (payload.action) {\n        case REMOTE_CONTROL_ACTIONS.REQUEST:\n          controlService.send(\"REQUEST\");\n          break;\n        case REMOTE_CONTROL_ACTIONS.STOP:\n          controlService.send(\"STOP\");\n          break;\n        default:\n          applyMirrorAction(mirror, payload);\n          break;\n      }\n    });\n  });\n  onDestroy(() => {\n    service.stop();\n    controlService.stop();\n  });\n</script>\n\n<div class=\"syncit-embed\" bind:this=\"{ref}\">\n  {#if open}\n  <div\n    transition:scale=\"{{duration: 500, opacity: 0.5, easing: quintOut}}\"\n    style=\"transform-origin: right bottom;\"\n  >\n    <Panel>\n      {#await login}\n      <div class=\"syncit-center syncit-load-text\">初始化中...</div>\n      {:then}\n      <!-- -->\n      {#if current.matches('idle')}\n      <div class=\"syncit-center\">\n        <div class=\"syncit-panel-control\">\n          <button class=\"syncit-btn ordinary\" on:click=\"{handleSelectBlock}\">\n            {selecting ? '取消' : '选择屏蔽区域'}\n          </button>\n          <div class=\"syncit-block-els\">\n            {#each blockEls as el, idx}\n            <Tag\n              on:mouseover=\"{() => highlight(el)}\"\n              on:mouseout=\"{removeHighlight}\"\n              on:click=\"{() => removeBlockEl(el)}\"\n              >区域-{idx + 1}\n            </Tag>\n            {/each}\n          </div>\n        </div>\n        <button class=\"syncit-btn\" on:click=\"{() => service.send('START')}\">\n          启用 syncit 分享\n        </button>\n      </div>\n      {:else if current.matches('ready')}\n      <div class=\"syncit-center syncit-load-text\">\n        <div class=\"syncit-load-text\">\n          已启用，等待连接中\n        </div>\n        <button\n          style=\"margin-top: 8px;\"\n          class=\"syncit-btn ordinary\"\n          on:click=\"{() => transporter.sendSourceReady()}\"\n        >\n          重试\n        </button>\n      </div>\n      {:else if current.matches('connected')}\n      <div class=\"syncit-center\">\n        <div class=\"syncit-panel-control\">\n          <p>镜像鼠标尺寸</p>\n          <div class=\"syncit-mouses\">\n            {#each ['小', '中', '大'] as size, idx}\n            <button\n              class=\"{`syncit-mouse-${idx + 1}`} syncit-btn ordinary\"\n              on:click=\"{() => changeMouseSize(idx + 1)}\"\n            >\n              {size}\n            </button>\n            {/each}\n          </div>\n          <p>\n            远程控制：\n            <!---->\n            {#if controlCurrent.matches('not_control')}未启用\n            <!---->\n            {:else if controlCurrent.matches('requesting')}申请中\n            <!---->\n            {:else if controlCurrent.matches('controlled')}已启用\n            <!---->\n            {/if}\n          </p>\n          {#if controlCurrent.matches('requesting')}\n          <button\n            class=\"syncit-btn ordinary\"\n            on:click=\"{() => controlService.send('ACCEPT')}\"\n          >\n            允许远程控制\n          </button>\n          {:else if controlCurrent.matches('controlled')}\n          <button class=\"syncit-btn ordinary\" on:click=\"{stopRemoteControl}\">\n            终止远程控制\n          </button>\n          {/if}\n        </div>\n        <button class=\"syncit-btn\" on:click=\"{() => service.send('STOP')}\">\n          停止分享\n        </button>\n      </div>\n      {/if}\n      <!---->\n      {:catch error}\n      <div class=\"syncit-center syncit-error\">{error.message}</div>\n      {/await}\n    </Panel>\n  </div>\n  {/if}\n  <!---->\n  <button class=\"syncit-toggle syncit-btn\" on:click=\"{() => open = !open}\">\n    <Icon name={open ? 'close' : 'team'}></Icon>\n  </button>\n  <!---->\n  <div bind:this=\"{mask}\" class=\"syncit-mask\"></div>\n</div>\n\n<style>\n  button {\n    outline: none;\n  }\n\n  .syncit-embed {\n    position: fixed;\n    right: 1em;\n    bottom: 1em;\n    display: flex;\n    flex-direction: column;\n    z-index: 9999;\n  }\n\n  .syncit-btn:hover {\n    background: #3399ff;\n  }\n\n  .syncit-btn,\n  .syncit-btn:active {\n    cursor: pointer;\n    background: #0078f0;\n    border: 1px solid rgba(62, 70, 82, 0.18);\n    box-shadow: 0px 1px 2px rgba(184, 192, 204, 0.6);\n    color: #fff;\n    padding: 8px 16px;\n    border-radius: 4px;\n    font-size: 14px;\n    line-height: 22px;\n    margin-bottom: 0.5em;\n  }\n\n  .syncit-btn.ordinary {\n    background: #fff;\n    color: #3e4652;\n    border: 1px solid rgba(129, 138, 153, 0.6);\n  }\n  .syncit-btn.ordinary:hover {\n    background: #f5f7fa;\n  }\n  .syncit-btn.ordinary:active {\n    background: #dfe4eb;\n  }\n\n  .syncit-toggle,\n  .syncit-toggle:active {\n    width: 40px;\n    height: 40px;\n    line-height: 40px;\n    border-radius: 20px;\n    padding: 0;\n    align-self: flex-end;\n  }\n\n  .syncit-center {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n  }\n\n  .syncit-load-text {\n    font-size: 14px;\n    line-height: 22px;\n    color: #3e4652;\n  }\n\n  .syncit-error {\n    color: #e75a3a;\n  }\n\n  .syncit-mask {\n    position: fixed;\n    left: 0;\n    top: 0;\n    pointer-events: none;\n    z-index: 999999;\n    background: rgba(136, 194, 232, 0.75);\n    border: 1px solid #3399ff;\n    display: none;\n  }\n\n  .syncit-panel-control {\n    flex: 1;\n    width: 100%;\n    align-items: flex-start;\n    border-bottom: 1px solid rgba(235, 239, 245, 0.6);\n    margin-bottom: 8px;\n  }\n\n  .syncit-block-els {\n    display: flex;\n    overflow: auto;\n    word-break: keep-all;\n  }\n\n  .syncit-block-els > :global(span) {\n    cursor: pointer;\n    margin-right: 4px;\n  }\n\n  .syncit-mouses {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n</style>\n",
    "<script>\n  import { scaleLinear } from \"d3-scale\";\n\n  export let width = 200;\n  export let height = 100;\n  export let color = \"#41EFC5\";\n  export let points = [];\n\n  $: minX = points[0] ? points[0].x : 0;\n  $: maxX = points[points.length - 1] ? points[points.length - 1].x : 0;\n  $: minY = Math.min.apply(null, ys);\n  $: maxY = Math.max.apply(null, ys);\n\n  $: xScale = scaleLinear().domain([minX, maxX]).range([0, width]);\n\n  $: ys = points.map((p) => p.y);\n  $: yScale = scaleLinear().domain([minY, maxY]).range([height, 0]);\n\n  $: path = `M${points.map((p) => `${xScale(p.x)},${yScale(p.y)}`).join(\"L\")}`;\n</script>\n\n<div\n  class=\"syncit-chart\"\n  bind:clientWidth=\"{width}\"\n  bind:clientHeight=\"{height}\"\n>\n  <svg>\n    <path class=\"path-line\" d=\"{path}\" stroke=\"{color}\"></path>\n  </svg>\n</div>\n\n<style>\n  .syncit-chart {\n    width: 100%;\n    height: 30px;\n  }\n\n  svg {\n    position: relative;\n    width: 100%;\n    height: 100%;\n  }\n\n  .path-line {\n    fill: none;\n    stroke-linejoin: round;\n    stroke-linecap: round;\n    stroke-width: 2;\n    transition: all 0.3s ease-in;\n    opacity: 0.7;\n  }\n</style>\n",
    "<script></script>\n\n<div class=\"syncit-panel\">\n  <slot></slot>\n</div>\n\n<style>\n  .syncit-panel {\n    width: 180px;\n    height: 240px;\n    background: #fff;\n    border: 1px solid #dfe4eb;\n    box-shadow: 0px 8px 16px rgba(129, 138, 153, 0.18),\n      0px 0px 4px rgba(235, 239, 245, 0.6);\n    border-radius: 10px;\n    padding: 8px;\n  }\n</style>\n",
    "<script></script>\n\n<span class=\"syncit-tag\" on:mouseover on:mouseout on:click>\n  <slot></slot>\n</span>\n\n<style>\n  .syncit-tag {\n    padding: 2px 8px;\n    font-size: 13px;\n    line-height: 20px;\n    color: #0078f0;\n    background: rgba(0, 128, 255, 0.1);\n    border: 1px solid rgba(0, 128, 255, 0.1);\n    border-radius: 4px;\n  }\n</style>\n"
  ],
  "names": [],
  "mappings": "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"
}